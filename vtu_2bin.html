<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.js"></script>
<script type="text/javascript" src="js/readtheorg.js"></script>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org6c6be5e">Data Format</a>
<ul>
<li><a href="#org44678e0">Velocity</a></li>
<li><a href="#org18101b1">Cartesian Mesh</a></li>
<li><a href="#org43bfa38">Unstructured Mesh</a>
<ul>
<li><a href="#orgd839ec8">Cordinates File</a></li>
<li><a href="#orgf21da91">Connectivity</a></li>
<li><a href="#org43a992b">Adjacency</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgaa0451f">vtu2bin</a>
<ul>
<li><a href="#org9f6eaa1">Project Organization</a></li>
</ul>
</li>
<li><a href="#orgde56f25">Options</a></li>
</ul>
</div>
</div>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left"><a href="./index.html">Home</a></td>
<td class="org-left"><a href="./inigenerator.html">inigenerator</a></td>
</tr>
</tbody>
</table>



<div id="outline-container-org6c6be5e" class="outline-2">
<h2 id="org6c6be5e">Data Format</h2>
<div class="outline-text-2" id="text-org6c6be5e">
<p>
To use flowVC, you'll need to supply velocity data in binary format. The velocity data typically requires separate files for the velocity field at each time point. A single (Cartesian) or  multiple (Unstructured) files define the mesh. These files all share a common prefix, which can be any name you choose and is referred to here as InFilePrefix.
</p>
</div>


<div id="outline-container-org44678e0" class="outline-3">
<h3 id="org44678e0">Velocity</h3>
<div class="outline-text-3" id="text-org44678e0">
<p>
If the velocity is defined discretely in time, each time instant should have its own separate file. The velocity data must be equally spaced in time. File names should follow the format InFilePrefix_vel.#.bin, where # is a unique index for each time instant. The difference between successive file time points must be consistent
</p>

<p>
Each file's content should begin with a time stamp, followed by the velocity vectors at each node.
</p>

\begin{equation}
t_s \; \underbrace{u_0\; v_0\; w_0}_{\text{node 0}} \underbrace{u_1\;  v_1 \; w_1}_{\text{node 1}} ....\; \underbrace{u_{n-1} \; v_{n-1}\; w_{n-1}}_{\text{node n-1}}
\end{equation}

<ul class="org-ul">
<li>Cartesian Data: the order should loop over the x-direction in the innermost loop, followed by y, and then z in the outer loop.</li>
<li>Unstructured Data: The ordering must align with the nodes specified in the InFilePrefix coordinates.#.bin file.</li>
<li>2D Data: you must still specify a third velocity component, \(w_i\), which can be set to 0.0.</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" width="100%">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Value</th>
<th scope="col" class="org-left">Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">t</td>
<td class="org-left">double</td>
</tr>

<tr>
<td class="org-left">u,v,w</td>
<td class="org-left">double</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-org18101b1" class="outline-3">
<h3 id="org18101b1">Cartesian Mesh</h3>
<div class="outline-text-3" id="text-org18101b1">
<p>
To define a cartesian mesh, the mesh bounds and resolution needs to be defined.
</p>

\begin{equation}
   x_{min} \;\; x_{max} \;\; x_{res} \;\; y_{min} \;\; y_{max}\;\; y_{res} \;\; z_{min} \;\; z_{max} \; \; z_{res}
\end{equation}

<ul class="org-ul">
<li>Resolution: Number of <b>nodes</b> in each direction (not intervals)</li>
<li>2D: Set \(z_{min} = z_{max} = 0.0\) and \(z_{res}=1\)</li>
</ul>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" width="100%">


<colgroup>
<col  class="org-center" />

<col  class="org-center" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-center">Value</th>
<th scope="col" class="org-center">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-center">min/max</td>
<td class="org-center">double</td>
</tr>

<tr>
<td class="org-center">res</td>
<td class="org-center">int</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org43bfa38" class="outline-3">
<h3 id="org43bfa38">Unstructured Mesh</h3>
<div class="outline-text-3" id="text-org43bfa38">
<p>
The unstructured mesh is defined by three files:
</p>
<ul class="org-ul">
<li>Coordinates File : InFilePrefix_coordinates.bin</li>
<li>Connectivity File: InFilePrefix_connectivity.bin</li>
<li>Adjacency File:    InFilePrefix_adjacency.bin</li>
</ul>
</div>

<div id="outline-container-orgd839ec8" class="outline-4">
<h4 id="orgd839ec8">Cordinates File</h4>
<div class="outline-text-4" id="text-orgd839ec8">
\begin{equation}
n \; \underbrace{x_0\; y_0\; z_0}_{\text{node 0}} \underbrace{x_1\;  y_1 \; z_1}_{\text{node 1}} ....\; \underbrace{x_{n-1} \; y_{n-1}\; z_{n-1}}_{\text{node n-1}}
\end{equation}

<ul class="org-ul">
<li>n: The the number of points in the data set</li>
<li>\(x_i \; y_i \; z_i\): The cordinates of each node</li>
<li>2D: set \(z_i = 0\)</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" width="100%">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Value</th>
<th scope="col" class="org-left">Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">n</td>
<td class="org-left">int</td>
</tr>

<tr>
<td class="org-left">\(x_i \; y_i \; z_i\)</td>
<td class="org-left">double</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgf21da91" class="outline-4">
<h4 id="orgf21da91">Connectivity</h4>
<div class="outline-text-4" id="text-orgf21da91">
<p>
The connectivity specifies the indices of the 4 nodes that make up each element. The index of each node is based on coordinates file ordering counting from 0.
</p>

\begin{equation}
   e\; \underbrace{i_0^0\; i_0^1\; i_0^2\; i_0^3}_{\text{element 0}} \underbrace{i_1^0\; i_1^1\; i_1^2\; i_1^3}_{\text{element 1}} ... \underbrace{i_{e-1}^0\; i_{e-1}^1\; i_{e-1}^2\; i_{e-1}^3}_{\text{element e-1}}
\end{equation}

<ul class="org-ul">
<li>e: The number of elements in the data set</li>
<li>\(i_i^j\): The index of the j'th node making i'th element in the dataset</li>
<li>2D: \(n_i^3 = -1\)</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides" width="100%">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Value</th>
<th scope="col" class="org-left">Data Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">e</td>
<td class="org-left">int</td>
</tr>

<tr>
<td class="org-left">\(i_i^j\)</td>
<td class="org-left">int</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-org43a992b" class="outline-4">
<h4 id="org43a992b">Adjacency</h4>
<div class="outline-text-4" id="text-org43a992b">
<p>
The adjacency file contains the indices of the adacent elements that share a face with the current element. The index of each element is based on the order of the connectivity file.
</p>

\begin{equation}
   e\; \underbrace{e_0^0\; e_0^1\; e_0^2\; e_0^3}_{\text{element 0}} \underbrace{e_1^0\; e_1^1\; e_1^2\; e_1^3}_{\text{element 1}} ... \underbrace{e_{e-1}^0\; e_{e-1}^1\; e_{e-1}^2\; e_{e-1}^3}_{\text{element e-1}}
\end{equation}

<ul class="org-ul">
<li>Boundary Elements: For faces not shared with other elements set \(e=-1\)</li>
<li>2D: \(e_i^3=-1\)</li>
<li>Ordering:</li>
</ul>
</div>
<ul class="org-ul">
<li><a id="orgcfd3369"></a>Data Type<br />
<div class="outline-text-5" id="text-orgcfd3369">
<p>
e(int): The number of elements in the data set
\(e_i^j\) (int): The index of the element that shares the j'th face for the ith element in the dataset. Note if the element face is not shared with another element (i.e. on the edge this is a -1)
</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgaa0451f" class="outline-2">
<h2 id="orgaa0451f">vtu2bin</h2>
<div class="outline-text-2" id="text-orgaa0451f">
<p>
The vtu2bin utility can be utilized to generate the binary files from a
.vtu dataset. To use it run:
</p>
<div class="org-src-container">
<pre class="src src-shell">python -m flowvcutils vtu2bin START STOP
</pre>
</div>

<p>
where START is the starting index of your velocity data and STOP is the stopping index of your velocity data
</p>
</div>

<div id="outline-container-org9f6eaa1" class="outline-3">
<h3 id="org9f6eaa1">Project Organization</h3>
<div class="outline-text-3" id="text-org9f6eaa1">
<p>
To utilize the flowVC-Utils
</p>

<p>
The recomended way to use this utility is in &#x2013;batch mode, which will create the binary files for multiple cases all at once. In order to do this structure your simulation results into the following format. The "project_root" can be any name, but
</p>

<p>
project_root
├── case1
│   ├── input_bin
│   ├── input_vtu
│   └── output_bin
└── case2
    ├── input_bin
    ├── input_vtu
    └── output_bin
</p>
</div>
</div>
</div>



<div id="outline-container-orgde56f25" class="outline-2">
<h2 id="orgde56f25">Options</h2>
<div class="outline-text-2" id="text-orgde56f25">
<div class="org-src-container">
<pre class="src src-text">python -m flowvcutils vtu2bin --help
Usage: python -m flowvcutils vtu2bin [OPTIONS] START STOP

  Convert .vtu files into .bin format for FlowVC.

  START: Starting index for the processing (positional argument). STOP :
  Stopping index for the processing (positional argument).

Options:
  --root TEXT           Directory with the VTU files (default: current
                        directory).In batch mode ensure vtu files are in
                        root/subdir/input_vtu/
  --output TEXT         Output directory target to store bin files (default:
                        current directory).In batch mode this will be
                        root/subdir/input_bin/
  --file_name TEXT      Base file name (e.g., steady_ for steady_00000.vtu)
                        (default: current directory name).Note: In batch
                        mode this will be the subdirectory namesensure files
                        are named
                        root/subdirname/input_vtu/subdirname_xxxxx.vtu
  --batch               Process subdirectories (directory mode) if set
                        otherwise process a single folder.
  --extension TEXT      File extension (default: '.vtu').
  --increment INTEGER   Increment between each vtu file (default: 50).
  --num_digits INTEGER  Digits in file name (e.g., 5 for test_00100.vtu).
                        (default: 5).
  --field_name TEXT     Field name for velocity data within the .vtu files
                        (default: 'velocity').
  -h, --help            Show this message and exit.

</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.3 (<a href="https://orgmode.org">Org</a> mode 9.6.15)</p>
</div>
</body>
</html>
